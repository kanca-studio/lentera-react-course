<html>
  <head>
    <title>Todolist</title>
  </head>
  <body>
    <div id="root"></div>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.12.4/babel.js"></script>
    <script type="text/babel">
      function ListItem(props) {
        return (
          <li
            draggable
            onDragStart={props.onDrag}
            onDrop={props.onDrop}
            onDragOver={(event) => event.preventDefault()}
          >
            <p>{props.item}</p>
            <button onClick={props.onDelete}>Delete</button>
          </li>
        );
      }

      function List(props) {
        const [draggedIndex, setDraggedIndex] = React.useState();

        return (
          <ol>
            {props.items.map((item, index) => (
              <ListItem
                item={item}
                onDrag={() => setDraggedIndex(index)}
                onDrop={() => props.onSwap(draggedIndex, index)}
                onDelete={() => props.onDelete(index)}
              />
            ))}
          </ol>
        );
      }

      function Input(props) {
        const [input, setInput] = React.useState("");

        function handleChange(event) {
          setInput(event.target.value);
        }

        function handleSubmit() {
          props.onSubmit(input);
          setInput("");
        }

        return (
          <div>
            <input type="text" value={input} onChange={handleChange} />
            <button onClick={handleSubmit}>add</button>
          </div>
        );
      }

      function App() {
        const [items, setItems] = React.useState(["eat", "sleep"]);

        function addItem(newItem) {
          setItems((prevItems) => [...prevItems, newItem]);
        }

        function deleteItem(targetIndex) {
          setItems((prevItems) =>
            prevItems.filter((item, index) => index !== targetIndex)
          );
        }

        function swapItem(firstIndex, secondIndex) {
          const tempItems = [...items];
          const tempItem = tempItems[firstIndex];
          tempItems[firstIndex] = tempItems[secondIndex];
          tempItems[secondIndex] = tempItem;
          setItems(tempItems);
        }

        return (
          <div>
            <Input onSubmit={addItem} />
            <List items={items} onDelete={deleteItem} onSwap={swapItem} />
          </div>
        );
      }

      const root = document.getElementById("root");
      ReactDOM.render(<App />, root);
    </script>
  </body>
</html>
